<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chatbot IA â€” Nicolas Tuor</title>
  <link rel="stylesheet" href="./style.css">
  <style>
    .chat { max-width: 820px; margin: 0 auto; }
    .chat-box { background: var(--panel); border:1px solid color-mix(in oklab,var(--ink),transparent 85%); border-radius:16px; padding:14px; box-shadow:var(--shadow); min-height:260px; }
    .msg { background: var(--bg-soft); border:1px solid color-mix(in oklab,var(--ink),transparent 85%); padding:10px 12px; border-radius:12px; margin:10px 0; }
    .me { border-color: color-mix(in oklab, var(--brand), transparent 70%); }
    .row { display:flex; gap:10px; margin-top:10px; }
    .row input { flex:1; padding:10px; border-radius:10px; border:1px solid color-mix(in oklab,var(--ink),transparent 80%); background: var(--bg-soft); color: var(--ink); }
  </style>
</head>
<body>
<header class="nav">
  <div class="container">
    <a class="brand" href="./index.html"><span class="brand-badge">NT</span><span class="brand-text">Nicolas Tuor</span></a>
    <nav class="nav-links">
      <a href="./index.html">Accueil</a><a href="./cv.html">CV</a><a href="./portfolio.html">Portfolio</a><a href="./ai-lab.html">AI Lab</a>
    </nav>
    <div class="nav-links">
      <button class="btn linkish" data-toggle-theme>ðŸŒ“</button>
      <a class="btn linkish" href="./chatbot.html">FR</a><a class="btn linkish" href="./chatbot-en.html">EN</a><a class="btn linkish" href="./chatbot-de.html">DE</a>
    </div>
  </div>
</header>

<main class="section container chat">
  <h1 class="title">ðŸ¤– Chatbot IA</h1>
  <p class="lead">Pose une question pour savoir pourquoi mâ€™embaucher (expÃ©rience, compÃ©tences, pÃ©dagogie, IA).</p>

  <div id="chat" class="chat-box"></div>

  <div class="row">
    <input id="q" type="text" placeholder="ex. Est-ce quâ€™il maÃ®trise lâ€™IA Ã  lâ€™Ã©cole ?" />
    <button id="send" class="btn primary">Envoyer</button>
  </div>
</main>

<script>
  const chat = document.getElementById('chat');
  function add(text, me=false){
    const p = document.createElement('div');
    p.className = 'msg'+(me?' me':'');
    p.textContent = text;
    chat.appendChild(p);
    chat.scrollTop = chat.scrollHeight;
  }
  async function ask(){
    const q = document.getElementById('q');
    const text = q.value.trim(); if(!text) return;
    add(text, true); q.value="";
    add("â€¦", false);
    try{
      const r = await fetch('/api/chat', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ question: text, lang: 'fr' })
      });
      const j = await r.json();
      chat.lastChild.textContent = j.answer || 'â€”';
    }catch(e){ chat.lastChild.textContent = 'Erreur.'; }
  }
  document.getElementById('send').onclick = ask;
  document.getElementById('q').addEventListener('keydown', e=>{ if(e.key==='Enter') ask(); });
</script>

<script src="./site.js" defer></script>
<script>(function(){const K="theme",H=document.documentElement,S=localStorage.getItem(K);if(S)H.setAttribute("data-theme",S);function set(t){H.setAttribute("data-theme",t);localStorage.setItem(K,t);}document.addEventListener("click",e=>{const t=e.target.closest("[data-toggle-theme]");if(!t)return;set(H.getAttribute("data-theme")==="light"?"dark":"light");});if(!S)set("dark");})();</script>
</body>
</html>
