<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Chatbot — Nicolas Tuor</title>
  <meta name="description" content="Assistant pédagogique avec accès optionnel au CV de Nicolas Tuor."/>
  <link rel="icon" href="/favicon.ico"/>
  <link rel="stylesheet" href="/style.css"/>
  <script src="/site.js" defer></script>

  <!-- PDF.js pour lecture de /CV_Nicolas_Tuor.pdf (optionnel mais recommandé) -->
  <script src="https://unpkg.com/pdfjs-dist@4.8.69/build/pdf.min.js"></script>

  <style>
    main.wrap { max-width: 980px }
    .chat-shell{display:grid;grid-template-rows:auto 1fr auto;gap:12px;min-height:60vh}
    .chat-log{background:#0b2237cc;border:1px solid #ffffff22;border-radius:14px;padding:12px;overflow:auto;min-height:320px}
    .msg{padding:10px 12px;margin:8px 0;border-radius:12px;border:1px solid #ffffff22;white-space:pre-wrap;word-break:break-word}
    .msg.user{background:#0f2d4a}
    .msg.assistant{background:#0b1f33}
    .chat-form textarea{width:100%;border-radius:10px;border:1px solid #ffffff22;padding:10px;background:#07192a;color:#e6f1ff}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    details.adv > summary{cursor:pointer;opacity:.9}
    .muted{opacity:.85}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="wrap row" aria-label="Navigation principale">
      <a href="/" class="btn ghost">Accueil</a>
      <a href="/portfolio.html" class="btn ghost">Portfolio</a>
      <a href="/cv.html" class="btn ghost">CV</a>
      <a href="/chatbot.html" class="btn" aria-current="page">Chatbot</a>
      <a href="/ai-lab.html" class="btn ghost">Idées IA</a>
      <a href="/fun-facts.html" class="btn ghost">Fun Facts</a>
      <span style="flex:1"></span>
      <a href="/chatbot.html" class="btn">FR</a>
      <a href="/chatbot-en.html" class="btn ghost">EN</a>
      <a href="/chatbot-de.html" class="btn ghost">DE</a>
    </nav>
  </header>

  <main class="wrap">
    <h1>Chatbot</h1>
    <p class="muted">Assistant pédagogique. Cochez l’option « Inclure le CV » pour autoriser le bot à utiliser des extraits de <code>CV_Nicolas_Tuor.pdf</code> si la question s’y prête.</p>

    <section class="chat-shell">
      <!-- Journal -->
      <div id="chatLog" class="chat-log" aria-live="polite" aria-busy="false"></div>

      <!-- Paramètres rapides -->
      <div class="row">
        <label><input type="checkbox" id="chatUseCv"> Inclure le CV si pertinent</label>
        <label>Modèle
          <select id="chatModel">
            <option value="gpt-4o-mini">gpt-4o-mini</option>
            <option value="gpt-4o">gpt-4o</option>
          </select>
        </label>
        <label>Langue
          <select id="chatLang">
            <option value="fr" selected>Français</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
          </select>
        </label>

        <details class="adv">
          <summary>Paramètres avancés</summary>
          <div class="field" style="margin-top:8px;max-width:880px">
            <label for="chatSystem" class="muted">Message système (facultatif)</label>
            <textarea id="chatSystem" rows="3" placeholder="Style / règles / rôle du bot…"></textarea>
          </div>
        </details>
      </div>

      <!-- Formulaire -->
      <form id="chatForm" class="chat-form" autocomplete="off">
        <label for="chatInput" class="muted">Votre message</label>
        <textarea id="chatInput" rows="3" placeholder="Posez votre question… (Entrée pour envoyer, Shift+Entrée pour une nouvelle ligne)"></textarea>
        <div class="row" style="margin-top:8px">
          <button id="chatSend" type="submit" class="btn primary">Envoyer</button>
          <button id="chatClear" type="button" class="btn">Effacer</button>
          <small id="chatTyping" class="muted" style="display:none">…</small>
        </div>
      </form>
    </section>
  </main>

  <footer class="wrap" style="margin:24px 0 40px;opacity:.8">
    © Nicolas Tuor — Chatbot éducatif
  </footer>

  <!-- Logique du chatbot (utilise PDF.js si présent) -->
  <script src="/chatbot.js" defer></script>
</body>
</html>
