<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chatbot IA ‚Äî Nicolas Tuor</title>
  <link rel="stylesheet" href="/style.css">
  <style>
    .chat { max-width: 820px; margin: 0 auto; }
    .chat-box { background: var(--panel); border:1px solid color-mix(in oklab,var(--ink),transparent 85%); border-radius:16px; padding:14px; box-shadow:var(--shadow); min-height:260px; }
    .msg { background: var(--bg-soft); border:1px solid color-mix(in oklab,var(--ink),transparent 85%); padding:10px 12px; border-radius:12px; margin:10px 0; }
    .me { border-color: color-mix(in oklab, var(--brand), transparent 70%); }
    .row { display:flex; gap:10px; margin-top:10px; }
    .row input { flex:1; padding:10px; border-radius:10px; border:1px solid color-mix(in oklab,var(--ink),transparent 80%); background: var(--bg-soft); color: var(--ink); }
  </style>
</head>
<body>
<header class="site-header">
  <nav class="wrap row" aria-label="Navigation principale">
    <a href="/" class="btn ghost">Accueil</a>
    <a href="/portfolio.html" class="btn ghost">Portfolio</a>
    <a href="/cv.html" class="btn ghost">CV</a>
    <a href="/chatbot.html" class="btn ghost">Chatbot</a>
    <!-- lien corrig√© -->
    <a href="/ai-lab.html" class="btn ghost">Id√©es IA</a>
    <a href="/fun-facts.html" class="btn ghost">Fun Facts</a>
    <span style="flex:1"></span>
    <!-- switch langues (m√™me contenu dans EN/DE, libell√©s traduits) -->
    <a href="#" class="btn">FR</a>
    <a href="/chatbot-en.html" class="btn ghost">EN</a>
    <a href="/chatbot-de.html" class="btn ghost">DE</a>
  </nav>
</header>

<main class="section container chat">
  <h1 class="title">ü§ñ Chatbot IA</h1>
  <p class="lead">Posez une question pour savoir pourquoi m‚Äôembaucher (exp√©rience, comp√©tences, p√©dagogie, IA).</p>

  <div id="chat" class="chat-box"></div>

  <div class="row">
    <input id="q" type="text" placeholder="Par ex. Utilisez-vous l‚ÄôIA de mani√®re responsable en classe ?" />
    <button id="send" class="btn primary">Envoyer</button>
  </div>
</main>

<script>
  const chat = document.getElementById('chat');
  function add(text, me=false){
    const p = document.createElement('div');
    p.className = 'msg'+(me?' me':'');
    p.textContent = text;
    chat.appendChild(p);
    chat.scrollTop = chat.scrollHeight;
  }
  async function ask(){
    const q = document.getElementById('q');
    const text = q.value.trim(); if(!text) return;
    add(text, true); q.value="";
    add("‚Ä¶", false);
    try{
      const r = await fetch('/api/chat', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ question: text, lang: 'fr' })
      });
      const j = await r.json();
      chat.lastChild.textContent = j.answer || '‚Äî';
    }catch(e){ chat.lastChild.textContent = 'Erreur.'; }
  }
  document.getElementById('send').onclick = ask;
  document.getElementById('q').addEventListener('keydown', e=>{ if(e.key==='Enter') ask(); });
</script>

<script src="/site.js" defer></script>
<script>(function(){const K="theme",H=document.documentElement,S=localStorage.getItem(K);if(S)H.setAttribute("data-theme",S);function set(t){H.setAttribute("data-theme",t);localStorage.setItem(K,t);}document.addEventListener("click",e=>{const t=e.target.closest("[data-toggle-theme]");if(!t)return;set(H.getAttribute("data-theme")==="light"?"dark":"light");});if(!S)set("dark");})();</script>
</body>
</html>
