<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nicolas Tuor — Accueil</title>

  <!-- Icônes (si déjà déposées) -->
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta name="theme-color" content="#0a1220" />

  <style>
    :root{
      --bg:#0a1220;          /* bleu-noir */
      --track:#23334a;       /* rail */
      --rail-glow:#1a344f;
      --station:#14b8a6;     /* teal accent */
      --station-dim:#0e7c71;
      --card-bg:#0e182a;
      --card-border:#1a2d49;
      --text:#eef3f8;
      --muted:#9fb2c8;
      --panel-bg:#0b1323;
      --panel-border:#152238;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background: radial-gradient(1200px 700px at 20% 0%, #0b1930 0%, var(--bg) 55%) fixed;
      color:var(--text);
      font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      overflow:hidden; /* focus visuel plein écran */
    }

    header{
      position:fixed; inset:20px auto auto 20px; z-index:10;
      display:flex; gap:.75rem; align-items:center; padding:.6rem .8rem;
      background:rgba(10,18,32,.65); backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,.06); border-radius:14px;
      box-shadow: var(--shadow);
    }
    header .brand{
      font-weight:800; letter-spacing:.5px;
      display:flex; align-items:center; gap:.5rem;
    }
    header .logo{
      width:32px; height:32px; border-radius:9px; display:grid; place-items:center;
      background:linear-gradient(135deg,#0a1220,#00060d);
      border:1px solid rgba(255,255,255,.08); color:#fff; font-weight:800;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
    }
    header nav a{
      color:var(--muted); text-decoration:none; padding:.25rem .5rem; border-radius:8px;
    }
    header nav a:hover{ color:var(--text); background:rgba(255,255,255,.05) }

    main{
      height:100%;
      display:grid;
      grid-template-columns: 1fr clamp(280px, 28vw, 420px);
      gap:18px;
      padding:90px 22px 22px 22px;
    }

    /* Scène rail */
    .scene{
      position:relative; border-radius:18px; overflow:hidden;
      background:
        radial-gradient(900px 640px at 80% 10%, rgba(20,184,166,.08) 0%, transparent 60%) ,
        linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
      border:1px solid rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      min-height: 480px;
    }
    svg{ width:100%; height:100% ; display:block }

    /* rail et traverses */
    .track{
      stroke:var(--track); stroke-width:8; fill:none;
      filter: drop-shadow(0 0 8px rgba(20,184,166,.08));
    }
    .sleepers{
      stroke:rgba(255,255,255,.05); stroke-width:4; stroke-linecap:round;
    }

    /* stations */
    .station{
      cursor:pointer;
      transform-box: fill-box;
      transform-origin: center;
      transition: transform .2s ease;
    }
    .station .dot{
      fill:var(--station);
      filter: drop-shadow(0 0 10px rgba(20,184,166,.55));
    }
    .station .ring{
      fill:none; stroke:var(--station); opacity:.5; stroke-width:3;
      animation: pulse 2.8s ease-out infinite;
      transform-origin:center;
    }
    .station:hover{ transform: scale(1.12) }
    .station text{
      fill:var(--muted); font-size:12px; text-anchor:middle; pointer-events:none;
    }
    @keyframes pulse{
      0%{ transform:scale(.8); opacity:.7 }
      70%{ transform:scale(1.25); opacity:0 }
      100%{ transform:scale(1.25); opacity:0 }
    }

    /* train */
    .train{
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.45));
    }
    .train-body{
      fill:#e8eef6; stroke:#c9d5e6; stroke-width:2;
    }
    .train-nose{ fill:#d0dcef }
    .headlight{ fill:#ffd66b; opacity:.92; filter: drop-shadow(0 0 12px rgba(255,214,107,.8)) }

    /* Carte idée (pop près de la station) */
    .idea{
      position:absolute; min-width: 220px; max-width: 320px;
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--card-border);
      border-radius:14px; padding:12px 14px;
      color:var(--text);
      box-shadow: var(--shadow);
      transform-origin: 20px 120%;
      animation: pop .28s ease-out forwards;
    }
    .idea::after{
      content:""; position:absolute; left:18px; bottom:-8px; width:14px; height:14px;
      background: inherit; border-left:1px solid var(--card-border); border-bottom:1px solid var(--card-border);
      transform: rotate(45deg);
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
    }
    .idea h4{ margin:.1rem 0 .35rem 0; font-size:15px; letter-spacing:.2px }
    .idea p{ margin:0; font-size:13px; color:var(--muted) }
    .idea a{ color:#7bdceb; text-decoration:none }
    .idea a:hover{ text-decoration:underline }
    @keyframes pop{
      from{ opacity:0; transform: scale(.85) rotate(-2deg) }
      to  { opacity:1; transform: scale(1) rotate(0) }
    }

    /* Panneau détails */
    aside{
      position:relative;
      border-left:1px solid var(--panel-border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
      border-radius:18px; padding:16px 16px 12px 16px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
    }
    .panel{
      position:sticky; top:90px; max-height: calc(100vh - 120px);
      display:flex; flex-direction:column; gap:10px; overflow:auto;
      scrollbar-width: thin; scrollbar-color: rgba(255,255,255,.15) transparent;
    }
    .panel h3{ margin:.2rem 0 .2rem 0; font-size:18px }
    .panel .meta{ color:var(--muted); font-size:12px }
    .panel .card{
      background:var(--panel-bg);
      border:1px solid var(--panel-border);
      border-radius:14px; padding:12px; box-shadow: var(--shadow);
    }
    .panel .card h4{ margin:.1rem 0 .35rem 0; font-size:15px }
    .panel .card p{ margin:0; color:var(--muted); font-size:14px }
    .panel .list{
      display:grid; grid-template-columns: 1fr; gap:10px;
    }

    /* Accessibilité motions */
    @media (prefers-reduced-motion: reduce){
      .station .ring{ animation:none }
      .idea{ animation:none }
    }

    /* Mobile */
    @media (max-width: 880px){
      main{ grid-template-columns: 1fr; padding-right:12px; padding-left:12px }
      aside{ order:-1 }
    }
  </style>
</head>
<body>
  <header aria-label="En-tête">
    <div class="brand">
      <div class="logo" aria-hidden="true">N·T</div>
      <div>
        Nicolas Tuor — <span style="color:var(--muted)">éducation, sciences & technologies</span>
      </div>
    </div>
    <nav aria-label="Navigation rapide">
      <!-- Liens internes (on branchera plus tard proprement) -->
      <a href="/cv.html">CV</a>
      <a href="/portfolio.html">Portfolio</a>
      <a href="/chatbot.html">Chatbot</a>
      <a href="/fun-facts.html">Fun Facts</a>
    </nav>
  </header>

  <main>
    <!-- Scène principale -->
    <section class="scene" aria-label="Ligne principale — stations de convictions">
      <svg id="metro" viewBox="0 0 1600 900" preserveAspectRatio="xMidYMid slice" role="img" aria-label="Animation du métro sur une ligne en zigzag">
        <defs>
          <linearGradient id="railGrad" x1="0" x2="1">
            <stop offset="0%" stop-color="var(--rail-glow)" stop-opacity=".25"/>
            <stop offset="100%" stop-color="var(--rail-glow)" stop-opacity="0"/>
          </linearGradient>
        </defs>

        <!-- Rail -->
        <path id="track" class="track" d="" />
        <!-- Traverses (petits segments perpendiculaires) -->
        <g id="sleepers" class="sleepers"></g>

        <!-- Stations -->
        <g id="stations"></g>

        <!-- Train -->
        <g id="train" class="train">
          <!-- corps du train -->
          <g transform="translate(-22,-12)">
            <rect class="train-body" x="0" y="0" rx="6" ry="6" width="44" height="24"/>
            <rect class="train-nose" x="30" y="2" rx="5" ry="5" width="12" height="20"/>
            <circle class="headlight" cx="40" cy="12" r="3"/>
            <rect x="5" y="4" width="8" height="8" fill="#6f87a9" rx="1"/>
            <rect x="16" y="4" width="8" height="8" fill="#6f87a9" rx="1"/>
            <rect x="5" y="14" width="8" height="6" fill="#a7b8cf" rx="1"/>
            <rect x="16" y="14" width="8" height="6" fill="#a7b8cf" rx="1"/>
          </g>
        </g>
      </svg>

      <!-- Cartes idées dynamiques -->
      <div id="idea-layer" aria-live="polite"></div>
    </section>

    <!-- Panneau de détails -->
    <aside>
      <div class="panel" id="panel">
        <div class="card">
          <h3>Convictions & lignes directrices</h3>
          <div class="meta">Clique une station sur la ligne pour les détails. Les cartes s’affichent automatiquement quand le métro passe.</div>
        </div>
        <div class="list" id="detail-list"></div>
      </div>
    </aside>
  </main>

  <script>
    // --- Données des stations (titre + description courte + détail long) ---
    const STATIONS = [
      {
        title: "Pensée critique",
        short: "Cultiver l’analyse, la preuve et le doute méthodique dans chaque activité.",
        detail: "J’aide à formuler des questions testables, à comparer des sources et à argumenter avec des évidences — en classe comme en organisation."
      },
      {
        title: "Apprentissage tout au long de la vie",
        short: "Autodidacticité outillée : apprendre vite, apprendre mieux, toute sa vie.",
        detail: "Je conçois des routines, ressources et micro-projets pour développer l’autonomie d’apprentissage et la mise à jour continue des compétences."
      },
      {
        title: "Goût de l’apprentissage",
        short: "Du plaisir à comprendre : curiosité, flow, petits défis fréquents.",
        detail: "On apprend durablement quand c’est signifiant et gratifiant. Je structure les tâches pour nourrir la curiosité et mesurer les progrès."
      },
      {
        title: "Pédagogie par projets",
        short: "Des problèmes réels, des livrables concrets, de vraies audiences.",
        detail: "De la définition du besoin à la restitution publique, les projets articulent contenus, méthodes et collaboration."
      },
      {
        title: "Émerveillement",
        short: "Créer des moments ‘wow’ qui déclenchent l’envie d’aller plus loin.",
        detail: "Je scénarise l’étonnement pour ouvrir une porte cognitive vers des notions complexes, sans sacrifier la rigueur."
      },
      {
        title: "Médiation & vulgarisation",
        short: "Traduire la science et la culture en expériences accessibles.",
        detail: "Montrer, raconter, faire : je transforme des savoirs en formats clairs, inclusifs et actionnables."
      },
      {
        title: "Communautés de pratiques",
        short: "Apprendre entre pairs, partager les tactiques qui marchent.",
        detail: "J’outille des espaces de mutualisation : cercles, check-ins, canevas, bibliothèques de cas, et capitalisation continue."
      },
      {
        title: "Apprendre par l’erreur",
        short: "Boucles rapides essai-feedback-amélioration, en sécurité psychologique.",
        detail: "L’erreur est un signal d’information : on la rend observable, réparable et utile, avec des itérations courtes."
      },
      {
        title: "Open science / open education",
        short: "Ouvrir les données, les méthodes et les ressources quand c’est possible.",
        detail: "Je privilégie la réutilisabilité (licences ouvertes, dépôts, gabarits) pour accélérer la diffusion et l’équité d’accès."
      },
      {
        title: "Environnements capacitants",
        short: "Concevoir des milieux qui rendent capables d’agir et d’apprendre.",
        detail: "On ajuste outils, contraintes et soutiens pour que chacun puisse développer ses capabilités et sa marge d’initiative."
      },
      {
        title: "Cours de technologie",
        short: "Construire, coder, documenter : apprendre la tech en la faisant.",
        detail: "Des séquences concrètes (robots, capteurs, web) où la technique sert des objectifs pédagogiques clairs et évaluables."
      },
      {
        title: "Méthodologie scientifique",
        short: "Hypothèses, protocoles, mesures, interprétation : la colonne vertébrale.",
        detail: "Je rends visibles les étapes et les critères de qualité pour renforcer la rigueur et l’esprit de vérification."
      },
      {
        title: "Populariser pour tous",
        short: "Former aussi les adultes : formats courts, utiles, respectueux du temps.",
        detail: "Je conçois des parcours modulaires, clés en main, pour des publics variés — sans jargon inutile."
      },
      {
        title: "Extended mind",
        short: "Les outils prolongent notre cognition : apprenons à les dompter.",
        detail: "Cadre ‘extended mind’ : choisir, évaluer et intégrer des artefacts qui augmentent mémoire, attention et jugement."
      },
      {
        title: "Évaluation : changer de paradigme",
        short: "Évaluer pour apprendre : authenticité, critères explicites, feedbacks.",
        detail: "Je bascule d’un tri sélectif vers des preuves de compétence situées, appuyées par des rubriques claires."
      },
      {
        title: "YouTube & ressources utiles",
        short: "Des contenus pragmatiques, vraiment actionnables pour enseignants.",
        detail: "Sélection, scénarisation et outils ‘clé en main’ —  moins de bruit, plus de valeur transférable en classe."
      },
      {
        title: "On ne peut pas être expert en tout",
        short: "Savoir s’entourer, relier les expertises, curer l’essentiel.",
        detail: "Je tisse des ponts entre disciplines et acteurs, et je priorise la valeur/apprentissage sur la perfection technique."
      },
      {
        title: "Consulting scientifique",
        short: "Relier recherche, terrain et décision.",
        detail: "J’apporte une lecture méthodique, des critères de preuve et des recommandations opérantes pour avancer lucidement."
      }
    ];

    // --- Construction de la géométrie du rail (zigzag qui revient) ---
    const svg = document.getElementById('metro');
    const track = document.getElementById('track');
    const sleepers = document.getElementById('sleepers');
    const stationLayer = document.getElementById('stations');
    const ideaLayer = document.getElementById('idea-layer');
    const train = document.getElementById('train');
    const detailList = document.getElementById('detail-list');

    let totalLen = 0;
    let stationPositions = []; // [{len, x, y, idx}]
    const sleeperStep = 46;    // distance entre traverses
    const showRadius = 32;     // seuil de déclenchement d'une carte
    const cardLinger = 4200;   // ms d'affichage par défaut

    function buildZigZagPath(){
      const {width:W, height:H} = svg.viewBox.baseVal; // 1600 x 900
      const topY = H*0.28;
      const botY = H*0.72;
      const left = 80, right = W-80;
      const segs = 8;

      // zigzag aller (haut)
      const dx = (right-left)/segs;
      let d = `M ${left},${topY}`;
      for(let i=1;i<=segs;i++){
        const x = left + i*dx;
        const y = (i%2===0)? topY-60 : topY+60;
        d += ` L ${x},${y}`;
      }
      d += ` L ${right},${topY}`;
      // descente
      d += ` L ${right},${botY}`;
      // zigzag retour (bas)
      for(let i=segs-1;i>=0;i--){
        const x = left + i*dx;
        const y = ((i%2)===0)? botY+60 : botY-60;
        d += ` L ${x},${y}`;
      }
      d += ` L ${left},${botY}`;
      // remontée vers le départ (boucle fermée)
      d += ` L ${left},${topY}`;

      track.setAttribute('d', d);

      // traverses
      sleeperRender();

      // longueur
      totalLen = track.getTotalLength();
    }

    function sleeperRender(){
      sleepers.innerHTML = '';
      const L = track.getTotalLength();
      for(let s = 0; s < L; s += sleeperStep){
        const p = track.getPointAtLength(s);
        const prev = track.getPointAtLength(Math.max(0, s - 1));
        const angle = Math.atan2(p.y - prev.y, p.x - prev.x) + Math.PI/2; // perpendiculaire
        const len = 16;
        const x1 = p.x - Math.cos(angle)*len;
        const y1 = p.y - Math.sin(angle)*len;
        const x2 = p.x + Math.cos(angle)*len;
        const y2 = p.y + Math.sin(angle)*len;
        const seg = document.createElementNS('http://www.w3.org/2000/svg','line');
        seg.setAttribute('x1', x1); seg.setAttribute('y1', y1);
        seg.setAttribute('x2', x2); seg.setAttribute('y2', y2);
        sleepers.appendChild(seg);
      }
    }

    function placeStations(){
      stationLayer.innerHTML = '';
      stationPositions = [];
      const N = STATIONS.length;
      for(let i=0;i<N;i++){
        const len = (i+0.5) * (totalLen / N);
        const p = track.getPointAtLength(len);
        stationPositions.push({ len, x:p.x, y:p.y, idx:i });

        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('class','station');
        g.setAttribute('data-idx', i);
        g.setAttribute('transform', `translate(${p.x},${p.y})`);

        const ring = document.createElementNS('http://www.w3.org/2000/svg','circle');
        ring.setAttribute('class','ring'); ring.setAttribute('r', 14);
        const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
        dot.setAttribute('class','dot'); dot.setAttribute('r', 6);

        const label = document.createElementNS('http://www.w3.org/2000/svg','text');
        label.setAttribute('y', -16);
        label.textContent = STATIONS[i].title;

        g.appendChild(ring); g.appendChild(dot); g.appendChild(label);
        g.addEventListener('click', () => openDetail(i));
        stationLayer.appendChild(g);
      }
    }

    function svgPointToPage(x,y){
      const pt = svg.createSVGPoint(); pt.x = x; pt.y = y;
      const ctm = svg.getScreenCTM();
      const {x:cx, y:cy} = pt.matrixTransform(ctm);
      return {x: cx, y: cy};
    }

    // --- Idées contextuelles (cartes pop) ---
    let lastShownIdx = -1;
    function maybeShowIdea(trainLen){
      for(const s of stationPositions){
        const delta = Math.abs(((trainLen - s.len + totalLen) % totalLen));
        const near = Math.min(delta, totalLen - delta);
        if(near < showRadius && s.idx !== lastShownIdx){
          lastShownIdx = s.idx;
          spawnIdeaCard(s);
          break;
        }
      }
    }

    function spawnIdeaCard(s){
      const data = STATIONS[s.idx];
      const pt = svgPointToPage(s.x, s.y);
      const card = document.createElement('div');
      card.className = 'idea';
      card.style.left = Math.max(12, pt.x - 18) + 'px';
      card.style.top  = Math.max(12, pt.y - 110) + 'px';
      card.innerHTML = `
        <h4>${escapeHtml(data.title)}</h4>
        <p>${escapeHtml(data.short)}</p>
      `;
      ideaLayer.appendChild(card);
      // auto remove
      setTimeout(() => card.remove(), cardLinger);
      // clic ouvre les détails
      card.addEventListener('click', () => openDetail(s.idx));
    }

    function escapeHtml(str){
      return str.replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]));
    }

    // --- Panneau de détails ---
    function renderDetailList(){
      detailList.innerHTML = '';
      STATIONS.forEach((st, i) => {
        const item = document.createElement('div');
        item.className = 'card';
        item.innerHTML = `
          <h4>${escapeHtml(st.title)}</h4>
          <p>${escapeHtml(st.detail)}</p>
        `;
        item.style.cursor = 'pointer';
        item.addEventListener('click', () => focusStation(i));
        detailList.appendChild(item);
      });
    }

    function openDetail(i){
      // met en tête de panneau (option visuelle simple)
      const head = document.createElement('div');
      head.className = 'card';
      head.innerHTML = `<h4>➜ ${escapeHtml(STATIONS[i].title)}</h4><p>${escapeHtml(STATIONS[i].detail)}</p>`;
      const panel = document.getElementById('panel');
      panel.prepend(head);
      // scroll en haut
      panel.scrollTo({ top:0, behavior:'smooth' });
      // petit highlight
      head.animate([{ backgroundColor:'rgba(20,184,166,.12)' }, { backgroundColor:'transparent' }], { duration:1200 });
      focusStation(i);
    }

    function focusStation(i){
      // courte mise en avant de la station sur le SVG
      const node = stationLayer.querySelector(`.station[data-idx="${i}"]`);
      if(!node) return;
      node.animate([{ transform:'scale(1.3)' },{ transform:'scale(1)' }], { duration:400, easing:'ease-out' });
    }

    // --- Animation du train le long du chemin ---
    let pos = 0;                 // longueur courante
    let speed = 120;             // px/s le long du path
    let lastT = performance.now();

    function tick(now){
      const dt = Math.min(40, now - lastT) / 1000; // clamp
      lastT = now;
      // pause si réduit-mouvements ?
      const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
      const effectiveSpeed = mq.matches ? 0 : speed;

      pos = (pos + effectiveSpeed * dt) % totalLen;

      const p = track.getPointAtLength(pos);
      const p2 = track.getPointAtLength((pos + 1) % totalLen);
      const angle = Math.atan2(p2.y - p.y, p2.x - p.x) * 180/Math.PI;

      train.setAttribute('transform', `translate(${p.x},${p.y}) rotate(${angle})`);
      maybeShowIdea(pos);

      requestAnimationFrame(tick);
    }

    // --- Init ---
    function init(){
      buildZigZagPath();
      placeStations();
      renderDetailList();
      lastT = performance.now();
      requestAnimationFrame(tick);

      // Rebuild on resize (debounced)
      let to=null;
      window.addEventListener('resize', ()=>{ clearTimeout(to); to=setTimeout(()=>{
        buildZigZagPath(); placeStations();
      }, 120); });
    }

    init();
  </script>
</body>
</html>
